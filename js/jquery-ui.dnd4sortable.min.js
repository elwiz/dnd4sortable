/**
 * Drag and drop for the jQuery UI sortable widget
 * Version: 0.6
 * Copyright (c) Tom Wojcik
 * Licenced under the BeerWare licence.
 */
(function(a,b){a.widget("ui.dnd4sortable",{options:{dummy:{tag:"li",text:"...",html:false,attr:{},css:{}},drop:function(a){},dragIn:function(a){},dragOut:function(a){}},_create:function(){this.element.addClass(this.widgetBaseClass);a(this.element).bind("dragover",{self:this},this._dragIn);a(this.element).parent().bind("dragover",{self:this},this._dragOut);a(this.element).bind("dragover",{self:this},this._dragOver);a(this.element).bind("drop",{self:this},this._drop)},_dragIn:function(b){var c=b.data.self;if(a(c.element).data(c.widgetName+"IsOver"))return false;a(c.element).data(c.widgetName+"IsOver",true);var d=a(document.createElement(c.options.dummy.tag));if(c.options.dummy.text)d.text(c.options.dummy.text);if(c.options.dummy.html)d.html(c.options.dummy.html);d.attr(c.options.dummy.attr);d.css(c.options.dummy.css);a(c.element).data(c.widgetName+"Dummy",d);c.options.dragIn.call(c,b.originalEvent)},_dragOut:function(b){var c=b.data.self;if(!a(c.element).data(c.widgetName+"IsOver"))return false;a(c.element).data(c.widgetName+"IsOver",false);var d=a(c.element).data(c.widgetName+"Dummy");var e=a(c.element).data("sortable");if(d&&e&&e.helper){e._mouseStop(b);d.remove()}c.options.dragOut.call(c,b.originalEvent)},_dragOver:function(b){var c=b.data.self;var d=a(c.element).data(c.widgetName+"Dummy");var e=a(c.element).data("sortable");if(d&&d.parent().length==0&&e){a(c.element).append(d);e.currentItem=d.data("sortable-item",true);b.target=d;e._mouseCapture(b,true);e._mouseStart(b,true,true);e.offset.click.top=0;e.offset.click.left=0}if(e.currentItem&&e.helper){e._mouseDrag(b)}b.preventDefault();b.stopPropagation()},_drop:function(b){var c=b.data.self;var d=a(c.element).data(c.widgetName+"Dummy");var e=a(c.element).data("sortable");if(e&&e.helper){e._mouseStop(b);c.options.drop.call(c,b.originalEvent)}b.preventDefault()},dummy:function(){return a(this.element).data(this.widgetName+"Dummy")},revert:function(){var b=a(this.element).data(this.widgetName+"Dummy");var c=a(this.element).data("sortable");if(b){b.remove()}if(c&&c.helper){c._mouseStop()}}})})(jQuery)